{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/blockcode/antigravity/contracts/ui/src/lib/abis.ts"],"sourcesContent":["export const AnonPollABI = [\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"_pollId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"string\",\n        \"name\": \"_questionCID\",\n        \"type\": \"string\"\n      },\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_start\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_end\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"optionsCount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_aggregator\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"bytes32\",\n        \"name\": \"nullifier\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"option\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Voted\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"aggregator\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"end\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"pollId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"questionCID\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"results\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256[]\",\n        \"name\": \"\",\n        \"type\": \"uint256[]\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"start\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"tallies\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"usedNullifier\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"option\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"verifier\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bytes\",\n        \"name\": \"proofData\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"vote\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n] as const;\n\nexport const PollFactoryABI = [\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"pollId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"poll\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"questionCID\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"PollCreated\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"questionCID\",\n        \"type\": \"string\"\n      },\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"start\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"end\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"optionsCount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"aggregator\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"createAnonPoll\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"poll\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"nextId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  }\n] as const;\n\nexport const EligibilityAggregatorABI = [\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_dao\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"verifier\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bool\",\n        \"name\": \"allowed\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"VerifierUpdated\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"pollId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"verifier\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bytes\",\n        \"name\": \"proofData\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"check\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"dao\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"isVerifier\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"verifier\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"allowed\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"setVerifier\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n] as const;\n\nexport const MockSemaphoreVerifierABI = [\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"pollId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"bytes\",\n        \"name\": \"proofData\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"verifyProof\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"nullifier\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  }\n] as const;\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///home/blockcode/antigravity/contracts/ui/src/components/PollList.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\nimport Link from 'next/link';\nimport { CONFIG } from '@/lib/config';\nimport { PollFactoryABI, AnonPollABI } from '@/lib/abis';\nimport { useWallet } from './Providers';\n\ninterface Poll {\n    id: number;\n    address: string;\n    question: string;\n    start: number;\n    end: number;\n}\n\nexport default function PollList() {\n    const { provider } = useWallet();\n    const [polls, setPolls] = useState<Poll[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchPolls = async () => {\n            try {\n                // Use a read-only provider if wallet not connected\n                const readProvider = provider || new ethers.JsonRpcProvider(CONFIG.rpcUrl);\n                const factory = new ethers.Contract(CONFIG.contracts.PollFactory, PollFactoryABI, readProvider);\n\n                // Fetch PollCreated events\n                // In a real app, we'd cache this or use a subgraph\n                const filter = factory.filters.PollCreated();\n                const events = await factory.queryFilter(filter);\n\n                const loadedPolls = await Promise.all(events.map(async (event: any) => {\n                    const { pollId, poll: pollAddress, questionCID } = event.args;\n\n                    // Fetch details from the poll contract\n                    const pollContract = new ethers.Contract(pollAddress, AnonPollABI, readProvider);\n                    const start = await pollContract.start();\n                    const end = await pollContract.end();\n\n                    // In a real app, we'd fetch the question from IPFS using questionCID\n                    // Here we assume questionCID is the question text for simplicity or we mock it\n                    const question = questionCID;\n\n                    return {\n                        id: Number(pollId),\n                        address: pollAddress,\n                        question,\n                        start: Number(start),\n                        end: Number(end)\n                    };\n                }));\n\n                setPolls(loadedPolls.reverse()); // Show newest first\n            } catch (err) {\n                console.error(\"Error fetching polls:\", err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchPolls();\n    }, [provider]);\n\n    if (loading) return <div>Loading polls...</div>;\n\n    return (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n            {polls.map((poll) => (\n                <Link key={poll.id} href={`/polls/${poll.id}`} className=\"block group\">\n                    <div className=\"rounded-lg border bg-card text-card-foreground shadow-sm hover:shadow-md transition-shadow p-6\">\n                        <h3 className=\"text-lg font-semibold mb-2 group-hover:text-primary transition-colors\">{poll.question}</h3>\n                        <div className=\"text-sm text-muted-foreground\">\n                            <p>Poll ID: {poll.id}</p>\n                            <p>Ends: {new Date(poll.end * 1000).toLocaleDateString()}</p>\n                        </div>\n                    </div>\n                </Link>\n            ))}\n            {polls.length === 0 && (\n                <div className=\"col-span-full text-center text-muted-foreground\">\n                    No polls found. Create one!\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":["useEffect","useState","ethers","Link","CONFIG","PollFactoryABI","AnonPollABI","useWallet","Poll","id","address","question","start","end","PollList","provider","polls","setPolls","loading","setLoading","fetchPolls","readProvider","JsonRpcProvider","rpcUrl","factory","Contract","contracts","PollFactory","filter","filters","PollCreated","events","queryFilter","loadedPolls","Promise","all","map","event","pollId","poll","pollAddress","questionCID","args","pollContract","Number","reverse","err","console","error","Date","toLocaleDateString","length"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///home/blockcode/antigravity/contracts/ui/src/components/CreatePoll.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { ethers } from 'ethers';\nimport { useWallet } from './Providers';\nimport { CONFIG } from '@/lib/config';\nimport { PollFactoryABI } from '@/lib/abis';\n\nexport default function CreatePoll() {\n    const { provider, account, connect } = useWallet();\n    const [question, setQuestion] = useState('');\n    const [optionsCount, setOptionsCount] = useState(2);\n    const [duration, setDuration] = useState(3600); // 1 hour\n    const [loading, setLoading] = useState(false);\n\n    const createPoll = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!provider || !account) {\n            connect();\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const signer = await provider.getSigner();\n            const factory = new ethers.Contract(CONFIG.contracts.PollFactory, PollFactoryABI, signer);\n\n            const start = Math.floor(Date.now() / 1000);\n            const end = start + duration;\n\n            // In a real app, we'd upload question to IPFS and get CID\n            // Here we just use the text as the CID\n            const tx = await factory.createAnonPoll(\n                question,\n                start,\n                end,\n                optionsCount,\n                CONFIG.contracts.EligibilityAggregator,\n                { gasLimit: 3000000 }\n            );\n\n            await tx.wait();\n            alert('Poll created successfully!');\n            setQuestion('');\n            // Ideally refresh list or redirect\n            window.location.reload();\n        } catch (err) {\n            console.error(\"Failed to create poll:\", err);\n            alert('Failed to create poll');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"rounded-lg border bg-card text-card-foreground shadow-sm p-6\">\n            <h2 className=\"text-2xl font-bold mb-4\">Create Poll</h2>\n            <form onSubmit={createPoll} className=\"space-y-4\">\n                <div>\n                    <label className=\"block text-sm font-medium mb-1\">Question</label>\n                    <input\n                        type=\"text\"\n                        value={question}\n                        onChange={(e) => setQuestion(e.target.value)}\n                        className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\"\n                        required\n                    />\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium mb-1\">Options Count</label>\n                    <input\n                        type=\"number\"\n                        min=\"2\"\n                        value={optionsCount}\n                        onChange={(e) => setOptionsCount(parseInt(e.target.value))}\n                        className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\"\n                        required\n                    />\n                </div>\n                <div>\n                    <label className=\"block text-sm font-medium mb-1\">Duration (seconds)</label>\n                    <input\n                        type=\"number\"\n                        min=\"60\"\n                        value={duration}\n                        onChange={(e) => setDuration(parseInt(e.target.value))}\n                        className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\"\n                        required\n                    />\n                </div>\n                <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2 w-full\"\n                >\n                    {loading ? 'Creating...' : 'Create Poll'}\n                </button>\n            </form>\n        </div>\n    );\n}\n"],"names":["useState","ethers","useWallet","CONFIG","PollFactoryABI","CreatePoll","provider","account","connect","question","setQuestion","optionsCount","setOptionsCount","duration","setDuration","loading","setLoading","createPoll","e","React","FormEvent","preventDefault","signer","getSigner","factory","Contract","contracts","PollFactory","start","Math","floor","Date","now","end","tx","createAnonPoll","EligibilityAggregator","gasLimit","wait","alert","window","location","reload","err","console","error","target","value","parseInt"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///home/blockcode/antigravity/contracts/ui/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport PollList from '@/components/PollList';\nimport CreatePoll from '@/components/CreatePoll';\n\nexport default function Home() {\n  return (\n    <div className=\"space-y-8\">\n      <section>\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Active Polls</h1>\n        </div>\n        <PollList />\n      </section>\n\n      <section className=\"border-t pt-8\">\n        <CreatePoll />\n      </section>\n    </div>\n  );\n}\n"],"names":["c","_c","PollList","CreatePoll","Home","$","$i","Symbol","for","t0","t1"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,UAAU,MAAM,yBAAyB;AAHhD,YAAY;;;;;AAKG;IAAA,MAAAE,CAAA,OAAAJ,kNAAA,EAAA;IAAA,IAAAI,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAA,IAAAI,EAAA;IAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAGTC,EAAA,iBAAA,+NAAA,OAKU;;8BAJR,+NAAA,GAEM;oBAFS,SAAwC,EAAxC,wCAAwC;4CACrD,+NAAA,EAAmE;wBAArD,SAAmC,EAAnC,mCAAmC;kCAAC,YAAY,EAA9D,EAAmE,CACrE,EAFA,GAEM;;;;;;;;;;;8BACN,+NAAC,8KAAQ,GACX,EALA,OAKU;;;;;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAJ,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAK,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QANZE,EAAA,iBAAA,+NAAA,GAWM;YAXS,SAAW,EAAX,WAAW,CACxB;;gBAAAD,EAKS;8BAET,+NAAA,OAEU;oBAFS,SAAe,EAAf,eAAe;4CAChC,+NAAC,gLAAU,GACb,EAFA,OAEU,CACZ,EAXA,GAWM;;;;;;;;;;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,OAXNK,EAWM;AAAA;KAbKN,KAAA","ignoreList":[]}}]
}