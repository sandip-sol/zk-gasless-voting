module.exports=[66432,a=>{"use strict";var b=a.i(31111),c=a.i(98486),d=a.i(35563),e=a.i(48026),f=a.i(87057),g=a.i(56280),h=a.i(76787);function i(){let{provider:a}=(0,h.useWallet)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let b=a||new d.ethers.JsonRpcProvider(f.CONFIG.rpcUrl),c=new d.ethers.Contract(f.CONFIG.contracts.PollFactory,g.PollFactoryABI,b),e=c.filters.PollCreated(),h=await c.queryFilter(e),i=await Promise.all(h.map(async a=>{let{pollId:c,poll:e,questionCID:f}=a.args,h=new d.ethers.Contract(e,g.AnonPollABI,b),i=await h.start(),j=await h.end();return{id:Number(c),address:e,question:f,start:Number(i),end:Number(j)}}));j(i.reverse())}catch(a){console.error("Error fetching polls:",a)}finally{l(!1)}})()},[a]),k)?(0,b.jsx)("div",{children:"Loading polls..."}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[i.map(a=>(0,b.jsx)(e.default,{href:`/polls/${a.id}`,className:"block group",children:(0,b.jsxs)("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm hover:shadow-md transition-shadow p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2 group-hover:text-primary transition-colors",children:a.question}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,b.jsxs)("p",{children:["Poll ID: ",a.id]}),(0,b.jsxs)("p",{children:["Ends: ",new Date(1e3*a.end).toLocaleDateString()]})]})]})},a.id)),0===i.length&&(0,b.jsx)("div",{className:"col-span-full text-center text-muted-foreground",children:"No polls found. Create one!"})]})}function j(){let{provider:a,account:e,connect:i}=(0,h.useWallet)(),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(2),[n,o]=(0,c.useState)(3600),[p,q]=(0,c.useState)(!1),r=async b=>{if(b.preventDefault(),!a||!e)return void i();q(!0);try{let b=await a.getSigner(),c=new d.ethers.Contract(f.CONFIG.contracts.PollFactory,g.PollFactoryABI,b),e=Math.floor(Date.now()/1e3),h=await c.createAnonPoll(j,e,e+n,l,f.CONFIG.contracts.EligibilityAggregator);await h.wait(),alert("Poll created successfully!"),k(""),window.location.reload()}catch(a){console.error("Failed to create poll:",a),alert("Failed to create poll")}finally{q(!1)}};return(0,b.jsxs)("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create Poll"}),(0,b.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Question"}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Options Count"}),(0,b.jsx)("input",{type:"number",min:"2",value:l,onChange:a=>m(parseInt(a.target.value)),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Duration (seconds)"}),(0,b.jsx)("input",{type:"number",min:"60",value:n,onChange:a=>o(parseInt(a.target.value)),className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:p,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2 w-full",children:p?"Creating...":"Create Poll"})]})]})}function k(){return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Active Polls"})}),(0,b.jsx)(i,{})]}),(0,b.jsx)("section",{className:"border-t pt-8",children:(0,b.jsx)(j,{})})]})}a.s(["default",()=>k],66432)}];

//# sourceMappingURL=antigravity_contracts_ui_src_app_page_tsx_f6ced24a._.js.map